<div class="h-100 w-100 search-container">
  <div class="pl-2 br-left search-icon-container">
    <mat-icon class="mt-2">search</mat-icon>
  </div>
    <button mat-flat-button
      id="searchBtn"
      [disabled]="disabled"
      (click)="openSearchList()"
      class="w-100 secondary ch text-left"
      #tooltip="matTooltip"
      matTooltip="Search Structures"
      matTooltipPosition="below">
      <span>{{selectedValues}}</span>
      <mat-icon>arrow_drop_down</mat-icon>
    </button>
    <div class="search-modal mat-elevation-z4"
        [hidden]="(searchState$ | async) === false">
      <mat-form-field class="br-top"
        appearance="legacy"
        floatLabel="never">
        <input matInput cdkFocusInitial #searchField
          [(ngModel)]="searchValue"
          placeholder="Search Structures"
          (input)="filterStructuresOnSearch()" />
        <button mat-button matSuffix mat-icon-button
          #clearBtn
          [hidden]="!searchValue"
          aria-label="Clear Search"
          matTooltip="Clear Search"
          (click)="clearSearchField()">
          <mat-icon>close</mat-icon>
        </button>
        <button mat-button matSuffix mat-icon-button
          aria-label="Close"
          matTooltip="Close"
          (click)="closeSearchList()">
          <mat-icon>arrow_drop_up</mat-icon>
        </button>
      </mat-form-field>
      <mat-selection-list #multiSelect
        [disabled]="disabled"
        [multiple]="true"
        (selectionChange)="selectOption()"
        [(ngModel)]="selectedOptions"
        [compareWith]="selectionCompareFunction">
        <mat-list-item *ngIf="filteredStructures.length == 0">
          <div>No entries found.</div>
        </mat-list-item>
        <mat-list-option
          *ngFor="let structure of structures"
          [value]="structure"
          color="primary"
          [hidden]="hideStructure(structure)"
          checkboxPosition="before">
          <div class="structure-name">
            <div>
            {{ structure.name }}
            </div>
            <div class="structure-group-name" >
            <em>{{ structure.groupName }}</em>
            </div>
          </div>
        </mat-list-option>
      </mat-selection-list>
    </div>
</div>
